<div *ngIf="(topic$ | async)" [@fadeAnimation] class="container-navbar-adjust container-fluid p-0 m-0 height-full">
  <div class="row p-0 m-0 height-full">
    <!-- Topic Details List -->
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4 m-0 p-0 border-right-1 border-bottom-md-1 border-right-md-0 height-full">
      <div class="p-3 pb-0 topic-details-heading">
        <legend class="text-primary font-weight-bold mb-0">{{ (topic$ | async).title }}</legend>
        <hr style="margin-top: 0.3rem; margin-bottom: 1rem;" />
        <p class="m-0 p-3 bg-secondary font-italic text-dark">{{ (topic$ | async).synopsis }}</p>
        <button (click)="onUpdateTopic()" role="button" class="topic-details-edit-button btn btn-sm btn-secondary btn-border-none">
          <i class="fas fa-info-circle icon-margin"></i>
        </button>
      </div>
      <div class="mx-3 px-3 pb-2">
        Created: <span class="float-sm-right badge badge-dark">{{ (topic$ | async).createdAt | date:short }}</span>
      </div>
      <div class="mx-3 px-3 pb-3">
        Modified: <span class="float-sm-right badge badge-dark">{{ (topic$ | async).updatedAt| date:short }}</span>
      </div>
    </div>

    <!-- Sections List -->
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-8 m-0 p-0">
      <h4 class="p-3 m-0 border-bottom-1">
        Sections
        <!-- Header Buttons -->
        <span class="float-right">
          <button (click)="onCreateSection()" role="button" class="btn btn-sm btn-outline-dark btn-border-none">
            <i class="far fa-file-alt icon-margin"></i>
            New
          </button>
          <button role="button" class="btn btn-sm btn-outline-dark btn-border-none" (click)="onOpenExportTopic()">
            <i class="fas fa-download icon-margin"></i>
            Export
          </button>
        </span>
        <span class="float-right" style="margin-top: -3px">
          <sn-debounced-search
              style="display: inline"
              debounceTime="500"
              [isSearching]="isSearching"
              (onSearch)="onSearchSections($event)">
          </sn-debounced-search>
        </span>
      </h4>
      <div class="">
        <sn-section-list
            [sections]="(searchSectionsResult$ | async)?.elements"
            (onDelete)="onDeleteSection($event)"
            (onEdit)="onEditSectionDetails($event)"
            (onCreate)="onCreateSection($event)">
        </sn-section-list>
        <div class="p-3">
          <sn-paginator
              [page]="(searchSectionsResult$ | async)"
              (onNextPage)="onGoToPage($event)"
              (onPreviousPage)="onGoToPage($event)"
              (onGoToPage)="onGoToPage($event)">
          </sn-paginator>
        </div>
      </div>
    </div>
  </div>
</div>

<sn-drawer
    [drawerLocation]="DrawerLocation.RIGHT">
</sn-drawer>

<div [@fadeAnimation] [formGroup]="form.get('profile')">
  
  <!-- First & Last Name Inputs -->
  <div class="flex flex-row gap-2 mb-3">
    <sn-form-group snExtraClasses="w-1/2">
      <label sn-form-label for="firstName">First Name</label>
      <input 
          sn-form-control
          formControlName="firstName" 
          name="firstName" 
          type="text" 
          id="firstName" 
          autocomplete="off"
          [ngClass]="{ 'is-invalid':!form.get('profile').get('firstName').valid && form.get('profile').get('firstName').touched  }">
      <small 
          sn-form-control-error
          *ngIf="
            form.get('profile').get('firstName').touched  
            && form.get('profile').get('firstName').hasError('required')">
        First name is required!
      </small>
      <small 
          sn-form-control-error
          *ngIf="
            form.get('profile').get('firstName').touched  
            && form.get('profile').get('firstName').hasError('minlength')">
        First name must be 3 characters!
      </small>
      <small 
          sn-form-control-error
          *ngIf="
            form.get('profile').get('firstName').touched  
            && form.get('profile').get('firstName').hasError('pattern')">
        First name must be only characters!
      </small>
    </sn-form-group>

    <sn-form-group snExtraClasses="w-1/2">
      <label sn-form-label for="lastName">Last Name</label>
      <input 
          sn-form-control
          formControlName="lastName" 
          name="lastName" 
          type="text" 
          id="lastName" 
          autocomplete="off"
          [ngClass]="{ 'is-invalid':!form.get('profile').get('lastName').valid && form.get('profile').get('lastName').touched  }">
      <small 
          sn-form-control-error
          *ngIf="
            form.get('profile').get('lastName').touched  
            && form.get('profile').get('lastName').hasError('required')">
        Last name is required!
      </small>
      <small 
          sn-form-control-error
          *ngIf="
            form.get('profile').get('lastName').touched  
            && form.get('profile').get('lastName').hasError('minlength')">
        Last name must be 3 characters!
      </small>
      <small 
          sn-form-control-error
          *ngIf="
            form.get('profile').get('lastName').touched  
            && form.get('profile').get('lastName').hasError('pattern')">
        Last name must be only characters!
      </small>
    </sn-form-group>
  </div>

  <!-- Address Form -->
  <ng-container [formGroup]="form.get('profile').get('address')">
    <!-- Street Input -->
    <sn-form-group snExtraClasses="mb-3">
      <label sn-form-label for="street">Street</label>
      <input 
          sn-form-control
          formControlName="street" 
          name="street" 
          type="text" 
          id="street" 
          autocomplete="off"
          [ngClass]="{ 'is-invalid':!form?.get('profile')?.get('address')?.get('street')?.valid && form?.get('address')?.get('street')?.touched  }">
      <small 
          sn-form-control-error 
          *ngIf="
            form.get('profile').get('address').get('street').touched  
            && form.get('profile').get('address').get('street').hasError('required')">
        Street is required!
      </small>
    </sn-form-group>

    <!-- Street 2 Input -->
    <sn-form-group snExtraClasses="mb-3">
      <label sn-form-label for="street2">Street 2</label>
      <input 
          sn-form-control
          formControlName="street2" 
          name="street2" 
          type="text" 
          id="street2" 
          autocomplete="off">
    </sn-form-group>
    
    <!-- City, State Zip Inputs-->
    <div class="flex flex-row gap-2 mb-3 items-start">
      <!-- City -->
      <sn-form-group snExtraClasses="w-1/3">
        <label sn-form-label for="city">City</label>
        <input 
            sn-form-control
            formControlName="city" 
            name="city" 
            type="text" 
            id="city" 
            autocomplete="off"
            [ngClass]="{ 'is-invalid':!form?.get('profile')?.get('address')?.get('city')?.valid && form?.get('address')?.get('city')?.touched  }">
        <small 
            sn-form-control-error 
            *ngIf="
              form.get('profile').get('address').get('city').touched  
              && form.get('profile').get('address').get('city').hasError('required')">
          City is required!
        </small>
      </sn-form-group>

      <!-- State -->
      <sn-form-group snExtraClasses="w-1/3">
        <label sn-form-label for="state">State</label>
        <select 
            sn-form-control
            formControlName="state" 
            name="state" 
            id="state" 
            autocomplete="off"
            [ngClass]="{ 'is-invalid':!form?.get('profile')?.get('address')?.get('state')?.valid && form?.get('address')?.get('state')?.touched  }">
          <option
              *ngFor="let state of states"
              [value]="state.abbr">
            {{ state.abbr }}
          </option>
        </select>
        <small 
            sn-form-control-error 
            *ngIf="
              form.get('profile').get('address').get('state').touched  
              && form.get('profile').get('address').get('state').hasError('required')">
          State is required!
        </small>
      </sn-form-group>

      <!-- Zip -->
      <sn-form-group snExtraClasses="w-1/3">
        <label sn-form-label nzSpan="24" nzFor="zip">Zip</label>
        <input 
            sn-form-control
            formControlName="zip" 
            name="zip" 
            type="text" 
            id="zip" 
            autocomplete="off"
            [ngClass]="{ 'is-invalid':!form?.get('profile')?.get('address')?.get('zip')?.valid && form?.get('address')?.get('zip')?.touched  }">
        <small 
            sn-form-control-error 
            *ngIf="
              form.get('profile').get('address').get('zip').touched  
              && form.get('profile').get('address').get('zip').hasError('required')">
          Zip is required!
        </small>
      </sn-form-group>
    </div>
  </ng-container>
  
</div>
